(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=document.querySelector(".popup__img"),o=document.querySelector(".popup__text"),r=document.querySelector("#popupPhoto"),i=function(){function i(e,s,l,u){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t(this,"_name",void 0),t(this,"_link",void 0),t(this,"_openPopup",void 0),t(this,"_cardElement",void 0),t(this,"_handleDelete",(function(){a._element.remove()})),t(this,"_toggleLike",(function(){a._elementLike.classList.toggle("element__like_active_black")})),t(this,"_handleImageClick",(function(){o.textContent=a._name,n.src=a._link,n.alt=a._name,a._openPopup(r)})),this._name=e,this._link=s,this._openPopup=u,this._cardElement=l}var s,l;return s=i,(l=[{key:"_getTemplateElement",value:function(){return document.querySelector(this._cardElement).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplateElement(),this._element.querySelector(".element__title").textContent=this._name,this._elementRectangle=this._element.querySelector(".element__rectangle"),this._elementRectangle.src=this._link,this._elementRectangle.alt=this._name,this._elementLike=this._element.querySelector(".element__like"),this._elementBascet=this._element.querySelector(".element__basket"),this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){this._elementBascet.addEventListener("click",this._handleDelete),this._elementLike.addEventListener("click",this._toggleLike),this._elementRectangle.addEventListener("click",this._handleImageClick)}}])&&e(s.prototype,l),Object.defineProperty(s,"prototype",{writable:!1}),i}();function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_inputSelector",void 0),l(this,"_submitButtonSelector",void 0),l(this,"_inactiveButtonClass",void 0),l(this,"_inputErrorClass",void 0),l(this,"_errorClass",void 0),l(this,"_formElement",void 0),l(this,"_inputList",void 0),l(this,"_buttonElement",void 0),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.classList.add(this._errorClass),n.textContent=t}},{key:"_hideError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?this.disableButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setIventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"enableValidation",value:function(){this._setIventListeners()}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),a=document.querySelector("#popupProfile"),c=document.querySelector("#popOpenProfile"),p=document.querySelector("#closeButtonProfile"),d=document.querySelector("#profileName"),m=document.querySelector("#profileProfession"),_=document.querySelector("#name-input"),h=document.querySelector("#job-input"),v=document.querySelector("#popupContainerProfile"),f=document.querySelector("#popupElements"),y=document.querySelector("#popOpenElements"),k=document.querySelector("#closeButtonElement"),E=document.querySelector("#popupContainerElements"),b=document.querySelector("#popupPhoto"),S=document.querySelector("#photoPopupButtonClose"),g=document.querySelector(".elements"),L=document.querySelector("#title-input"),q=document.querySelector("#link-input"),C=document.querySelector("#popupProfile"),B=document.querySelector("#popupElements"),w=C.querySelector(".popup__container"),P=B.querySelector(".popup__container"),x={inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_inactively",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_active"},j=new u(x,w);j.enableValidation();var I=new u(x,P);function O(e){document.addEventListener("keydown",T),e.classList.add("popup_opened")}function V(e){document.removeEventListener("keydown",T),e.classList.remove("popup_opened")}function D(e,t){var n=function(e,t){return new i(e,t,".template",O).generateCard()}(e,t);g.prepend(n)}function R(e){e.target.classList.contains("popup")&&V(e.target)}function T(e){"Escape"===e.key&&V(document.querySelector(".popup_opened"))}I.enableValidation(),p.addEventListener("click",(function(){return V(a)})),k.addEventListener("click",(function(){return V(f)})),S.addEventListener("click",(function(){return V(b)})),v.addEventListener("submit",(function(e){e.preventDefault(),d.textContent=_.value,m.textContent=h.value,j.disableButton(),V(a)})),E.addEventListener("submit",(function(e){e.preventDefault(),D(L.value,q.value),e.target.reset(),I.disableButton(),V(f)})),a.addEventListener("mousedown",R),f.addEventListener("mousedown",R),b.addEventListener("mousedown",R),y.addEventListener("click",(function(){return O(f)})),c.addEventListener("click",(function(){return _.value=d.textContent,h.value=m.textContent,void O(a)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){return D(e.name,e.link)}))})();